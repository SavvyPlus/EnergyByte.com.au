{{!< default}}

<div class="container wrapper">
  {{!-- Latest Posts --}}
  <div class="section">


    <div class="flex flex-cc m-b">
      {{!-- Tag List --}}
      <div class="tag-list-wrap flex-1">
      {{#get "tags" order="count.posts desc" limit="5"}}
        <div class="tag-list">
          {{#foreach tags}}
            <a class="tag-item" href="{{url}}">{{name}}</a>
          {{/foreach}}
        </div>
      {{/get}}
      </div>
    
      {{!-- Grid/List buttons --}}
      <button class="toggle__item btn--grid p-sm m-r-sm js-grid-btn" 
        aria-label="{{t "Grid"}}" title="{{t "Grid"}}" onclick="setView('grid')">
        {{> icon name="grid" size="sm"}}
      </button>
      <button class="toggle__item btn--list p-sm js-list-btn" 
        aria-label="{{t "List"}}" title="{{t "List"}}" onclick="setView('list')">
        {{> icon name="list" size="sm"}}
      </button>
    </div>

    {{!-- Posts
    <div class="grid post-container">
      {{#foreach posts visibility="all"}}
        {{> post-card img=true }}
      {{/foreach}}
    </div> --}}
      
    {{!-- Posts --}}
    <div class="grid post-container">
{{#if @member.paid}}
        {{#foreach posts visibility="paid"}}
        {{> post-card img=true }}
        {{/foreach}}
    {{else}}
        {{#if @member}}
        {{#foreach posts visibility="public,members"}}
        {{> post-card img=false }}
        {{/foreach}}
    {{else}}
        {{#foreach posts visibility="public"}}
        {{> post-card img=false }}
        {{/foreach}}
        {{/if}}
{{/if}}
    </div>

    {{!-- Load more posts --}}
    <div class="col-xs-12 center-xs m-t-lg">
      <button class="btn btn--wide btn--shadow btn--brand js-load-more" onclick="loadMorePosts(this)">
        {{t "Load more posts"}}
      </button>
    </div>
  </div>
